(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f97f30c"],{"0401":function(e,t,a){},"0c75":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-skeleton",{attrs:{loading:e.boxloading,animated:""}},[a("template",{slot:"template"},[a("div",[a("el-skeleton-item",{staticClass:"topshowdiv",staticStyle:{width:"130px",height:"40px"},attrs:{variant:"div"}})],1),a("div",[a("el-skeleton-item",{staticClass:"topshowdiv",staticStyle:{width:"100%",height:"400px","margin-top":"20px"},attrs:{variant:"div"}})],1)]),[a("addpeople",{attrs:{addchange:e.isaddmessage},on:{childchange:e.addpeoplechange}}),a("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"primary"},on:{click:function(t){e.isaddmessage=!0}}},[e._v("新增车主信息")]),a("fan-dialog",{attrs:{title:"固定车位续费",visible:e.isaddcartime,width:"80%"},on:{"update:visible":function(t){e.isaddcartime=t}}},[a("table",{attrs:{id:"addtimebox"}},[a("tr",[a("td",{staticStyle:{width:"100px"}},[a("el-tag",[e._v("车主姓名")])],1),a("td",[e._v(e._s(e.addcarobj.CarpersonName))])]),a("tr",[a("td",[a("el-tag",[e._v("车牌编号")])],1),a("td",[e._v(e._s(e.addcarobj.CarNumber))])]),a("tr",[a("td",[a("el-tag",[e._v("车位编号")])],1),a("td",[e._v(e._s(e.addcarobj.CarportNumber))])]),a("tr",[a("td",[a("el-tag",[e._v("每月价格")])],1),a("td",[e._v("￥"+e._s(e.addcarobj.monthfare))])]),a("tr",[a("td",[a("el-tag",[e._v("到期时间")])],1),e.addcarobj.DueDate?a("td",[e._v(" "+e._s(e.addcarobj.DueDate.slice(0,10))+" ")]):a("td",[e._v("暂无信息")])]),a("tr",[a("td",[a("el-tag",[e._v("续费时长")])],1),a("td",[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.toaddtime,callback:function(t){e.toaddtime=t},expression:"toaddtime"}},e._l(e.cartime,(function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})})),1)],1)]),a("tr",[a("td",[a("el-tag",[e._v("总金额")])],1),a("td",{staticStyle:{color:"grey"}},[e._v("￥"+e._s(e.totaladdmoney))])])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.isaddcartime=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addcartime}},[e._v("确 定")])],1)]),a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"PersonName",label:"车主姓名",width:"140"}}),a("el-table-column",{attrs:{prop:"CarNumber",label:"车牌号码",width:"180"}}),a("el-table-column",{attrs:{prop:"CarportNumber",label:"车位编号",width:"180"}}),a("el-table-column",{attrs:{prop:"DueDate",label:"到期时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.DueDate?a("span",[e._v(e._s(t.row.DueDate.substr(0,10)))]):a("span",[a("el-tag",{attrs:{type:"danger"}},[e._v("已到期")])],1)]}}])}),a("el-table-column",{attrs:{prop:"Adress",label:"地址"}}),a("el-table-column",{attrs:{prop:"Age",label:"年龄"}}),a("el-table-column",{attrs:{prop:"Phone",label:"手机号码"}}),a("el-table-column",{attrs:{label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){return e.toaddcartime(t.row)}}},[e._v("续费")]),a("el-button",{attrs:{size:"mini",type:"primary"}},[e._v("修改")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deletepeoplemes(t.row)}}},[e._v("删除")])]}}])})],1)]],2)],1)},o=[],r=(a("a9e3"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("fan-dialog",{attrs:{title:"新增车主信息",visible:e.isaddmessage,width:"80%"},on:{"update:visible":function(t){e.isaddmessage=t}}},[a("table",{attrs:{id:"addpeopletable"}},[a("tr",[a("td",{staticStyle:{width:"100px"}},[a("el-tag",[e._v("车主姓名")])],1),a("td",[a("el-input",{attrs:{placeholder:"请输入车主姓名"},model:{value:e.PersonName,callback:function(t){e.PersonName=t},expression:"PersonName"}})],1)]),a("tr",[a("td",[a("el-tag",[e._v("车牌号码")])],1),a("td",[a("el-input",{staticStyle:{width:"35%",float:"left"},attrs:{placeholder:"地区号"},model:{value:e.firtsCarNumber,callback:function(t){e.firtsCarNumber=t},expression:"firtsCarNumber"}}),a("span",[e._v("-")]),a("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"车牌号码"},model:{value:e.secondeCarNumber,callback:function(t){e.secondeCarNumber=t},expression:"secondeCarNumber"}})],1)]),a("tr",[a("td",[a("el-tag",[e._v("家庭地址")])],1),a("td",[a("el-input",{attrs:{placeholder:"请输入家庭住址"},model:{value:e.Adress,callback:function(t){e.Adress=t},expression:"Adress"}})],1)]),a("tr",[a("td",[a("el-tag",[e._v("车主年龄")])],1),a("td",[a("el-input",{attrs:{placeholder:"请输入车主年龄"},model:{value:e.Age,callback:function(t){e.Age=t},expression:"Age"}})],1)]),a("tr",[a("td",[a("el-tag",[e._v("手机号码")])],1),a("td",[a("el-input",{attrs:{placeholder:"请输入手机号码"},model:{value:e.Phone,callback:function(t){e.Phone=t},expression:"Phone"}})],1)]),a("tr",[a("td",[a("el-tag",[e._v("车位选择")])],1),a("td",[a("el-select",{attrs:{placeholder:"请选择固定车位"},model:{value:e.selectcarnumber,callback:function(t){e.selectcarnumber=t},expression:"selectcarnumber"}},e._l(e.nofixcarport,(function(t){return a("el-option",{key:t.CarportNumber,attrs:{label:t.CarportNumber,value:{value:t.CarportNumber,label:t.monthfare}}},[a("div",{staticClass:"carportshow"},[a("span",[e._v(e._s(t.CarportNumber))]),a("span",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.position))]),a("span",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v("￥"+e._s(t.monthfare))])])])})),1)],1)]),a("tr",[a("td",[a("el-tag",[e._v("时长选择")])],1),a("td",[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.selecttime,callback:function(t){e.selecttime=t},expression:"selecttime"}},e._l(e.cartime,(function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})})),1)],1)]),a("tr",[a("td",[a("el-tag",[e._v("最终金额")])],1),a("td",[a("span",[e._v("￥"+e._s(e.totalfare))])])])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.isaddmessage=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addpeoplemessage}},[e._v("确 定")])],1)])],1)}),l=[],i={props:{addchange:Boolean},mounted:function(){this.getnotfixport()},watch:{addchange:function(e){this.isaddmessage=e,this.getnotfixport()},isaddmessage:function(){this.$emit("childchange",this.isaddmessage)},selectcarnumber:function(e){this.totalfare=Number(e.label)*this.selecttime},selecttime:function(e){this.totalfare=Number(this.selectcarnumber.label)*e}},data:function(){return{isaddmessage:!1,selectcarnumber:"",selecttime:"",nofixcarport:[],CarNumber:"",firtsCarNumber:"",secondeCarNumber:"",CarportNumber:"",PersonName:"",Adress:"",Age:"",Phone:"",totalfare:0,cartime:[{id:1,value:"一个月"},{id:3,value:"三个月"},{id:6,value:"半年"},{id:12,value:"一年"}]}},methods:{getnotfixport:function(){var e=this;this.$axios.get("/getnotfixport").then((function(t){console.log(t),e.nofixcarport=t.data.result}))},addpeoplemessage:function(){var e=this;this.CarNumber=this.firtsCarNumber+this.secondeCarNumber,this.$axios.post("/getfare",{type:1,fare:this.totalfare}).then((function(t){console.log(t),1==t.data.flag&&e.$axios.post("/addpersonmes",{CarNumber:e.CarNumber,CarportNumber:e.selectcarnumber.value,PersonName:e.PersonName,Adress:e.Adress,Age:e.Age,Phone:e.Phone,duetime:e.selecttime}).then((function(t){console.log(t),e.messageBox(t.data.message,"success"),e.getnotfixport(),e.isaddmessage=!1}))}))}}},n=i,d=a("2877"),c=Object(d["a"])(n,r,l,!1,null,null,null),u=c.exports,m={mounted:function(){this.getpersonmes()},watch:{toaddtime:function(e){console.log(e),this.totaladdmoney=e*Number(this.addcarobj.monthfare)}},components:{addpeople:u},data:function(){return{boxloading:!0,tableData:[],isaddmessage:!1,isaddcartime:!1,addcarobj:{},totaladdmoney:0,editpersonmessage:{},cartime:[{id:1,value:"一个月"},{id:3,value:"三个月"},{id:6,value:"半年"},{id:12,value:"一年"}],toaddtime:""}},methods:{getpersonmes:function(){var e=this;this.$axios.get("/getpersonmes").then((function(t){console.log(t),e.tableData=t.data.result,e.boxloading=!1}))},editpersoncarmes:function(e){this.carpersonshow=!0,this.editpersonmessage=e},toaddcartime:function(e){this.totaladdmoney=0,this.toaddtime="",this.isaddcartime=!0,this.addcarobj=e},addcartime:function(){var e=this;this.toaddtime?this.$axios.post("/addcartime",{CarportNumber:this.addcarobj.CarportNumber,currentdate:this.addcarobj.DueDate,addtime:this.toaddtime,totalfare:this.totaladdmoney}).then((function(t){e.messageBox(t.data.message,"success"),e.isaddcartime=!1,e.getpersonmes(),console.log(t)})):this.messageBox("请先选择续费时长","warning")},deletepeoplemes:function(e){var t=this;console.log(e),this.$axios.post("/deletepersonmes",{CarNumber:e.CarNumber,CarportNumber:e.CarportNumber}).then((function(e){console.log(e),t.$message({message:e.data.message,type:"success"}),t.getpersonmes()}))},addpeoplechange:function(e){this.isaddmessage=e,this.getpersonmes()}}},p=m,b=(a("bda0"),Object(d["a"])(p,s,o,!1,null,null,null));t["default"]=b.exports},bda0:function(e,t,a){"use strict";var s=a("0401"),o=a.n(s);o.a}}]);