(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ee71a91"],{"498a":function(e,s,t){"use strict";var n=t("23e7"),i=t("58a8").trim,o=t("c8d2");n({target:"String",proto:!0,forced:o("trim")},{trim:function(){return i(this)}})},a15b:function(e,s,t){"use strict";var n=t("23e7"),i=t("44ad"),o=t("fc6a"),a=t("a640"),c=[].join,r=i!=Object,m=a("join",",");n({target:"Array",proto:!0,forced:r||!m},{join:function(e){return c.call(o(this),void 0===e?",":e)}})},a640:function(e,s,t){"use strict";var n=t("d039");e.exports=function(e,s){var t=[][e];return!!t&&n((function(){t.call(null,s||function(){throw 1},1)}))}},c8d2:function(e,s,t){var n=t("d039"),i=t("5899"),o="​᠎";e.exports=function(e){return n((function(){return!!i[e]()||o[e]()!=o||i[e].name!==e}))}},cfeb:function(e,s,t){"use strict";t.r(s);var n=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("div",{staticClass:"mychatdiv"},[t("div",{ref:"apendmessage",staticClass:"toapendmessage"},[t("transition-group",{attrs:{tag:"div",name:"myemojia"}},e._l(e.allvalue,(function(s){return t("div",{key:s.id},[2==s.type?t("p",{staticClass:"addroom"},[e._v(e._s(s.content))]):t("div",{class:[s.type?"mychatingdiv":"otherchatingdiv"]},[t("div",{staticClass:"chattingimg"},[t("img",{attrs:{src:s.img}})]),t("div",{staticClass:"nameandspan"},[t("div",{class:[s.type?"rightname":"leftname","showmyname"]},[e._v(e._s(s.name))]),t("div",{class:[s.type?"mychattingspandiv":"otherchattingspandiv"]},[t("span",{class:[s.type?"mychattingspan":"otherchattingspan"],domProps:{innerHTML:e._s(s.content)}})])])])])})),0)],1),t("div",{ref:"myshowpersondiv",staticClass:"myshowpersondiv"},[t("div",{staticClass:"myshowperson"},[t("div",{staticClass:"showhowmany"},[e._v("在线人数："+e._s(e.allpersonlength))]),e._l(e.allperson,(function(s){return t("div",{key:s.content,staticClass:"everyperson"},[t("div",{staticClass:"showpersonimg"},[t("img",{attrs:{src:s.img}})]),t("div",{staticClass:"showbasemessage"},[t("div",{staticClass:"showbasemessagename"},[e._v(e._s(s.adminname))]),t("div",{staticClass:"showbasemessageself"},[e._v(e._s(s.privatemes))])])])}))],2),t("div",{staticClass:"myshowpersonbtn"},[t("span",{class:[e.isshowperson?"el-icon-s-fold":"el-icon-s-unfold"],on:{click:function(s){e.isshowperson=!e.isshowperson}}})])])]),t("div",{staticClass:"mybar"},[t("span",{staticClass:"chatjob iconfont icon-biaoqing1",on:{click:function(s){e.isshowemoji=!e.isshowemoji}}},[t("transition",{attrs:{name:"myemoji"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.isshowemoji,expression:"isshowemoji"}],staticClass:"myemoji"},e._l(30,(function(s){return t("div",{key:s,staticClass:"emojichild",on:{click:function(t){return t.stopPropagation(),e.appendemoji(s)}}},[t("img",{attrs:{src:"https://cdn.sunofbeaches.com/emoji/"+s+".png"}})])})),0)])],1),t("span",{staticClass:"chatjob iconfont icon-shizhongfill",on:{click:e.calltime}}),t("span",{staticClass:"chatjob el-icon-circle-plus",on:{click:e.morejob}}),t("el-button",{staticClass:"chatbtn",attrs:{type:"primary",size:"mini"},on:{click:e.sendmymessahe}},[e._v("发送")])],1),t("div",{ref:"sendmes",staticClass:"chatbar",attrs:{enterkeyhint:"send",contenteditable:""},on:{keydown:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.sendmymessahe(s)},keyup:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.claerupdiv(s)}}})])},i=[],o=(t("a15b"),t("d81d"),t("d3b7"),t("498a"),{mounted:function(){this.$refs.sendmes.focus(),this.jointhisweb()},data:function(){return{isshowperson:!1,myid:sessionStorage.getItem("adminid"),myprivatemes:sessionStorage.getItem("privatemes"),robotname:"机器人小冰",robotimg:"https://img2.baidu.com/it/u=1336695291,4230230958&fm=26&fmt=auto",allcontent:0,allvalue:[],allperson:[],isshowemoji:!1}},computed:{allpersonlength:function(){return this.allperson.length},myname:function(){return this.$store.state.myname},myimg:function(){return this.$store.state.myuserimg}},watch:{isshowperson:function(e){console.log(e),this.$refs.myshowpersondiv.style.left=e?"0px":"-160px"}},methods:{jointhisweb:function(){console.log(this.myname),this.$socket.emit("login",{adminid:this.myid,img:this.myimg,adminname:this.myname,privatemes:this.myprivatemes})},sendmymessahe:function(){var e=this;this.isshowemoji=!1;var s=this.$refs.sendmes.innerHTML;if(s.trim()){var t={id:Date.now(),type:1,name:this.myname,img:this.myimg,content:this.$refs.sendmes.innerHTML,value:this.$refs.sendmes.innerHTML,adminid:this.myid};this.sendmymessage(t),this.$nextTick((function(){e.changescroll()}))}else this.messageBox("消息不能为空","warning");this.claerupdiv()},claerupdiv:function(){console.log(this.allva),this.$refs.sendmes.innerHTML="",this.$refs.sendmes.focus()},changescroll:function(){this.$refs.apendmessage.scrollTop=this.$refs.apendmessage.scrollHeight},sendmymessage:function(e){this.allvalue.push(e),this.$socket.emit("client",{adminid:e.adminid,value:e.value})},appendemoji:function(e){console.log(e);var s="https://cdn.sunofbeaches.com/emoji/"+e+".png ",t=document.createElement("img");t.setAttribute("class","sendemoji"),t.src=s,this.$refs.sendmes.append(t)},calltime:function(){var e=this,s=this.getnowtime();this.allvalue.push({id:Date.now(),type:0,name:this.robotname,img:this.robotimg,content:"现在是："+s}),this.$nextTick((function(){e.changescroll()}))},getnowtime:function(){var e=new Date,s=e.getFullYear(),t=e.getMonth()+1,n=e.getDate(),i=e.getHours(),o=e.getMinutes(),a=e.getSeconds();return[s,t,n].join("-")+" "+[i,o,a].map((function(e){return e>=10?e:"0"+e})).join(":")+" "},morejob:function(){this.joinroom("更多功能正在开发中...")},joinroom:function(e){this.allvalue.push({id:Date.now(),type:0,name:this.robotname,img:this.robotimg,content:e})}},sockets:{loginback:function(e){console.log(e),this.allperson=e.users,0!=e.flag&&this.joinroom("欢迎"+e.adminname+"加入房间"),console.log("????")},sendmes:function(e){var s=this;new Promise((function(t){s.allvalue.push({id:Date.now(),type:0,name:e.users.adminname,img:e.users.img,content:e.value}),t()})).then((function(){s.changescroll()}))},somelive:function(e){console.log(e),this.allperson=e.users,this.allvalue.push({id:Date.now(),type:0,name:this.robotname,img:this.robotimg,content:e.adminname+"跑路了"})}}}),a=o,c=(t("d88e"),t("2877")),r=Object(c["a"])(a,n,i,!1,null,null,null);s["default"]=r.exports},d88e:function(e,s,t){"use strict";var n=t("fd7c"),i=t.n(n);i.a},fd7c:function(e,s,t){}}]);